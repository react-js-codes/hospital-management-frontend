{"ast":null,"code":"import axios from'axios';import{useState,useEffect}from'react';import{Link}from'react-router-dom';import{useAuth}from'../../context/AuthContext';import PatientList from'./PatientList';import PatientForm from'./PatientForm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Patients(){const{user}=useAuth();const[patients,setPatients]=useState([]);const[loading,setLoading]=useState(true);const[showForm,setShowForm]=useState(false);useEffect(()=>{const fetchPatients=async()=>{try{const res=await axios.get('/api/patients');setPatients(res.data);setLoading(false);}catch(err){console.error(err);setLoading(false);}};fetchPatients();},[]);const handleAddPatient=async patientData=>{try{const res=await axios.post('/api/patients',patientData);setPatients([...patients,res.data]);setShowForm(false);}catch(err){console.error(err);}};const handleDelete=async id=>{try{await axios.delete(`/api/patients/${id}`);setPatients(patients.filter(patient=>patient._id!==id));}catch(err){console.error(err);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"Patient Management\"}),(user===null||user===void 0?void 0:user.role)==='admin'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowForm(true),className:\"bg-primary-500 text-white px-4 py-2 rounded\",children:\"Add New Patient\"})]}),showForm&&/*#__PURE__*/_jsx(PatientForm,{onAddPatient:handleAddPatient,onCancel:()=>setShowForm(false)}),/*#__PURE__*/_jsx(PatientList,{patients:patients,onDelete:handleDelete})]});}","map":{"version":3,"names":["axios","useState","useEffect","Link","useAuth","PatientList","PatientForm","jsx","_jsx","jsxs","_jsxs","Patients","user","patients","setPatients","loading","setLoading","showForm","setShowForm","fetchPatients","res","get","data","err","console","error","handleAddPatient","patientData","post","handleDelete","id","delete","filter","patient","_id","children","className","role","onClick","onAddPatient","onCancel","onDelete"],"sources":["C:/Users/Suresh/hospital-management/frontend/src/pages/Patients/index.jsx"],"sourcesContent":["import axios from 'axios';\r\nimport { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport PatientList from './PatientList';\r\nimport PatientForm from './PatientForm';\r\n\r\nexport default function Patients() {\r\n  const { user } = useAuth();\r\n  const [patients, setPatients] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showForm, setShowForm] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchPatients = async () => {\r\n      try {\r\n        const res = await axios.get('/api/patients');\r\n        setPatients(res.data);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error(err);\r\n        setLoading(false);\r\n      }\r\n    };\r\n    \r\n    fetchPatients();\r\n  }, []);\r\n\r\n  const handleAddPatient = async (patientData) => {\r\n    try {\r\n      const res = await axios.post('/api/patients', patientData);\r\n      setPatients([...patients, res.data]);\r\n      setShowForm(false);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await axios.delete(`/api/patients/${id}`);\r\n      setPatients(patients.filter(patient => patient._id !== id));\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <h1 className=\"text-2xl font-bold\">Patient Management</h1>\r\n        {user?.role === 'admin' && (\r\n          <button\r\n            onClick={() => setShowForm(true)}\r\n            className=\"bg-primary-500 text-white px-4 py-2 rounded\"\r\n          >\r\n            Add New Patient\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {showForm && (\r\n        <PatientForm \r\n          onAddPatient={handleAddPatient} \r\n          onCancel={() => setShowForm(false)}\r\n        />\r\n      )}\r\n\r\n      <PatientList patients={patients} onDelete={handleDelete} />\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}